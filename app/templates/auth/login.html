{% extends "base.html" %}
{% block title %}Doctor Login{% endblock %}
{% import 'components/macros.html' as components %}

{% block content %}
<div class="flex flex-col md:flex-row gap-[3vw] items-center justify-center min-h-[94vh]">
<!-- Left Panel (Fixed to match design) -->
<div class="md:w-1/2 flex items-center justify-center p-10 h-[60vh] md:h-[90vh] rounded-3xl relative overflow-hidden bg-black">
  <div class="absolute inset-0 z-0">
    <img src="{{ url_for('static', filename='images/phage-bg.webp') }}" alt="Green DNA" class="object-cover w-full h-full opacity-55" />
  </div>
  <div class="relative z-10 flex flex-col justify-end w-full max-w-2xl h-full pb-8">
    <h2 class="text-3xl leading-snug md:text-5xl md:leading-snug font-extrabold text-white mb-4">
      Welcome to Quint – AI-Powered Phage Matching Platform
    </h2>
    <p class="text-white text-base leading-relaxed">
      Easily upload pathogen data and let our advanced AI models help you identify targeted phage therapy options faster than ever.
    </p>
  </div>
</div>

  <!-- Right Panel -->
  <div class="w-full md:w-1/2 py-10">
    <div class="flex justify-center mb-4">
      <img src="{{ url_for('static', filename='images/logo.png') }}" alt="DTPx Logo" class="h-12" />
    </div>
    <h2 class="text-center text-3xl font-semibold mb-6">Login to your account</h2>

    <!-- Flash messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          {{ components.flash_message(category, message) }}
        {% endfor %}
      {% endif %}
    {% endwith %}
    

    <form method="POST" action="{{ url_for('auth.login') }}" class="space-y-4">
      {{ form.hidden_tag() }}

      <div class="mb-4">
        {{ form.email.label(class="block text-sm font-medium text-gray-700 mb-2") }}
        {{ form.email(class=components.input_classes(form.email), placeholder="Input your registered email") }}
        {{ components.field_errors(form.email) }}
        {{ components.field_success(form.email) }}
      </div>

      <div class="mb-4 relative">
        {{ form.password.label(class="block text-sm font-medium text-gray-700 mb-2") }}
        <div class="relative">
          {{ form.password(class=components.input_classes(form.password) + ' pr-10', placeholder="Input your account password", id="login-password-field") }}
          <button type="button"
            class="absolute inset-y-0 right-0 px-3 flex items-center text-gray-500 focus:outline-none toggle-password"
            data-target="login-password-field"
            data-eye-open="login-eye-open"
            data-eye-closed="login-eye-closed">
            <!-- Eye icon (visible) -->
            <svg id="login-eye-open" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
            </svg>
            <!-- Eye-off icon (hidden, toggled via JS) -->
            <svg id="login-eye-closed" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M13.875 18.825A10.05 10.05 0 0112 19c-4.477 0-8.268-2.943-9.542-7a9.956 9.956 0 012.293-3.95M6.634 6.634A9.956 9.956 0 0112 5c4.477 0 8.268 2.943 9.542 7a9.956 9.956 0 01-4.293 5.95M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M3 3l18 18" />
            </svg>
          </button>
        </div>
        {{ components.field_errors(form.password) }}
        {{ components.field_success(form.password) }}
      </div>

      <div class="flex items-center justify-between text-sm">
        <label class="inline-flex items-center">
          {{ form.remember(class="form-checkbox text-green-700") }}
          <span class="ml-2">{{ form.remember.label.text }}</span>
        </label>
        <a href="{{ url_for('auth.forgot_password') }}" class="text-green-700 hover:underline">Forgot Password?</a>
      </div>

      <div class="mt-4">
        {{ form.submit(class=components.button_classes()) }}
      </div>

      <p class="text-center text-sm mt-4">
        You're new in here?
        <a href="{{ url_for('auth.signup') }}" class="text-green-700 hover:underline">Create Account</a>
      </p>
    </form>

    <footer class="text-xs text-center mt-6 text-gray-500">
      © 2025 <strong>Digital Theuphatics</strong>. All rights reserved. 
      <a href="#" class="underline mx-1">Terms & Conditions</a> | 
      <a href="#" class="underline ml-1">Privacy Policy</a>
    </footer>
  </div>
</div>
{% endblock %}
